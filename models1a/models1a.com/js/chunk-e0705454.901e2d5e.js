(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e0705454"],{"1cb36":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e._self._c;return e.$user?t("div",{staticClass:"user-menu"},[t("div",{staticClass:"user-menu-bgwrap",on:{click:e.toggleMenu}}),t("div",{staticClass:"user-menu-content"},[t("div",{staticClass:"user-menu-card"},[t("div",{staticClass:"user-menu-card-avatar",attrs:{fcenter:""}},[t("Avatar",{class:["user-menu__avatar",e.isPicture(e.$user)?"borderImageMedium":""],attrs:{user:e.$user}})],1),t("div",{staticClass:"user-menu-card-header"},[t("div",{staticClass:"user-menu-card-header-name"},[t("p",{staticClass:"user-menu-card-header-name-username"},[e._v(e._s("model"===e.$user.role?e.$user.artisticName:e.$user.user))])]),t("div",{staticClass:"user-menu-card-header-role"},[t("p",{staticClass:"user-menu-card-header-role-title"},[e._v(e._s(e.dicUserRoles[e.$user.role]))])]),"model"!==e.$user.role?t("div",{staticClass:"user-menu-card-header-email"},[t("iconic",{staticClass:"email-icon",attrs:{name:"email"}}),t("p",{staticClass:"user-menu-card-header-email-title"},[e._v(e._s(e.$user.email))])],1):e._e()]),t("div",{staticClass:"user-menu-card-buttons"},[t("div",{staticClass:"user-menu-card-buttons-button",on:{click:e.profile}},[t("iconic",{attrs:{name:"userInput"}}),t("p",{staticClass:"user-menu-card-buttons-button-title"},[e._v("Ver perfil")])],1),e.validateShowIpSecure?t("div",{staticClass:"user-menu-card-buttons-button",on:{click:e.openLocations}},[t("iconic",{attrs:{name:"sede"}}),t("p",{staticClass:"user-menu-card-buttons-button-title"},[e._v("Abrir sedes")])],1):e._e()]),t("div",{staticClass:"user-menu-card-divider"}),t("div",{staticClass:"user-menu-card-option"},[t("div",{staticClass:"user-menu-card-option-button",on:{click:e.closeApp}})])])])]):e._e()},n=[],r=(s("14d9"),s("d8d7")),a=s("3d20"),i=s.n(a),c=s("e9db"),u=s.n(c),l={components:{Avatar:()=>s.e("chunk-fea472fe").then(s.bind(null,"13ee"))},props:{user:Object},data(){return{dicUserRoles:{employee:"empleado",superadmin:"superadmin",coordinator:"coordinador",monitor:"monitor",model:"modelo"}}},computed:{validateSite(){return!1},validateShowIpSecure(){var e;const t=null===(e=this.$user.rolesApp)||void 0===e?void 0:e.ipsecure;return(null===t||void 0===t?void 0:t.length)&&this.validateSite}},methods:{toggleMenu:function(){const e=document.querySelector(".user-menu");e.classList.toggle("active")},isPicture:function(e){return e&&e.picture},openLocations:async function(){try{const e={baseURL:Object({NODE_ENV:"production",VUE_APP_KEY_NAME:"website",VUE_APP_MODE:"prod",VUE_APP_HOST:"https://models1a.com",VUE_APP_API_HOST:"https://models1a.com/api/v1/",VUE_APP_API_HOST_SERVICE:"https://userregistration.models1a.com/api/v1/",VUE_APP_SOCKET:"https://models1a.com",VUE_APP_SOCKET_SERVICE:"https://userregistration.models1a.com",VUE_APP_TOKEN_NAME:"authorization",VUE_APP_API_ADMIN:"https://administration.models1a.com/api/v1/",VUE_APP_SESSION_API:"https://sessions.models1a.com/api/v1",VUE_APP_SITE_KEY_RECAPTCHA:"6Le4VMspAAAAADuusPWbiOnXwez_RtCxXgu2xVi2",VUE_APP_GOOGLE_API_KEY:"AIzaSyBPZV9u1uAO5zD1OjPd3fOjqVTjIYb20Ds",VUE_APP_CF_SITE_KEY:"0x4AAAAAAAy7Il79CScXTFjp",VUE_APP_PUBLIC_API_KEY_JWT:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0eXBlIjoiYXBpLWtleSIsInJvbGUiOiJwdWJsaWMtcmVnaXN0ZXIiLCJwdXJwb3NlIjoiZm9ybS1zaWdudXAiLCJpYXQiOjE3NDY0NjUxOTcsImV4cCI6MTc0NzA2OTk5N30.-Jao3WUrKVwMPZh5kdd6o6MVwMaIEx-4bImU24A61D4",BASE_URL:"/"}).VUE_APP_IPSECURE_API,tokenName:"authorization"},{status:t}=await u.a.instance(e).get("command"),s={isSuccess:200===t,message:200===t?"Se desbloquea acceso a todas las sedes.":"Error desbloqueando sedes."};this.openSuccess(s)}catch(e){console.error("error",e)}},profile(){this.toggleMenu();const e=Object(r["getHost"])(),t="/account";if(this.validateSite)return void this.$router.push(t);const s=this.$user.SSID,o=`${e}/auth/?sstk=${s}&redirect=${t}`;location.href=o},closeApp(){const e=Object(r["getHost"])();this.toggleMenu(),"website"!==Object(r["getMain"])().key&&localStorage.removeItem("authorization"),location.href=`${e}/logout/?user=${this.$user._id}&sstk=${this.$user.SSID}`},openSuccess:function(e,t){const s=i.a.fire({icon:e.isSuccess?"success":"error",text:e.message,confirmButtonColor:"#bd0909"});s.then(e=>{t&&t()})}}},d=l,p=(s("a7a7"),s("2877")),m=Object(p["a"])(d,o,n,!1,null,null,null);t["default"]=m.exports},"4e0e":function(e,t,s){"use strict";s.r(t),s.d(t,"alerts",(function(){return r}));var o=s("3d20"),n=s.n(o);const r={dataSendConfirm:function({title:e,message:t,buttonTextYes:s,buttonTextNo:o}={}){return n.a.fire({title:e||"¿Está seguro?",text:t||"Sus datos serán enviados",icon:"question",showCancelButton:!0,confirmButtonColor:"#bd0909",cancelButtonColor:"##515151",confirmButtonText:s||"Si, enviar",cancelButtonText:o||"No, cancelar"})},dataSending:function({title:e,message:t}={}){n.a.fire({title:e||"Enviando",text:t||"Los datos se están enviando y procesando",timerProgressBar:!0,allowOutsideClick:!1,didOpen:()=>{n.a.showLoading()}})},dataSendError:function({title:e,message:t,buttonText:s}={}){n.a.close(),n.a.fire({title:e||"Error",html:t||"Error enviando los datos",icon:"error",timerProgressBar:!0,confirmButtonColor:"#bd0909"})},dataSendSuccess:function({title:e,message:t,buttonText:s}={}){n.a.close(),n.a.fire({title:e||"Completado",text:t||"Haz enviado tus datos exitosamente, pronto te contactaremos",icon:"success",confirmButtonText:s||"Aceptar",timerProgressBar:!0,confirmButtonColor:"#bd0909"})},dataInfo:function({title:e,message:t,buttonText:s}={}){n.a.close(),n.a.fire({title:e||"",text:t||"",icon:"info",confirmButtonText:s||"Aceptar",timerProgressBar:!0,confirmButtonColor:"#bd0909"})}};t["default"]=r},a7a7:function(e,t,s){"use strict";s("f705")},d8d7:function(e,t,s){const o=s("0340"),{getSession:n}=s("8669"),r=s("e9db"),{alerts:a}=s("4e0e");e.exports={getMain:function(){const t=e.exports;return t.getApp("autologin")},getHost:function(t){const s=e.exports;t||(t=s.getMain().link);const o=new URL(t);return o.origin},getApp:function(e){const t=o.apps_icons.find(t=>t.key===e);return t},getAppLink:function(e){const t=o.apps_icons.find(t=>t.key===e);return t?t.link:null},getApps:function(){return o.apps_icons},getAuthLnk:function(t){var s;const o=e.exports,r=o.getApp(t),a=null===(s=n())||void 0===s?void 0:s.SSID,i=o.getHost(r.link);return`${i}/auth/?sstk=${a}&app=${r.key}`},openOutApp:(e,t,s,o)=>{if(o)return void parent.postMessage({message:"openApp",data:{app:e,auth:t,sstk:s}},"*");const n=window.open(t,"_blank");n.location.href=t,n.focus()},goToApp:async(t,s,o,n,r,i)=>{const c=e.exports,u=await c.verifyAppRequireIp(t,s,o);if(!u)return void a.dataInfo({title:"Lo sentimos no se encuentra en ninguna de nuestras sedes",message:"Una vez te encuentres ubicado en alguna de nuestras sedes podrás acceder sin problema",icon:"info",iconColor:"#bd0909",confirmButtonColor:"#bd0909"});if(t.key===n)return void(window.location=i||"/main");const l=c.getHost(t.link),d=s.SSID;let p=`${l}/auth/?sstk=${d}&app=${t.key}`;i&&(p+="&redirect="+i),t.out?c.openOutApp(t,p,d,r):(localStorage.removeItem(o),location.href=p)},verifyAppRequireIp:async(t,s,o)=>{try{localStorage.removeItem("ipAllowed");const n=()=>localStorage.setItem("ipAllowed",!0);if(null===t||void 0===t||!t.ipLimit)return!0;if("superadmin"===s.role)return n(),!0;const a=e.exports,i=a.getMain(),c={baseURL:i.api,tokenName:o},{data:u}=await r.instance(c).get("/location"),l=(null===u||void 0===u?void 0:u.isAllowed)||!1;return l&&n(),l}catch(n){console.log("verifyAppRequireIp: "+n.message)}}}},e9db:function(e,t,s){const o=s("bc3a");class n{constructor(){this.timeout=1e4,this.headers={"Content-Type":"application/json"}}getAuthToken(e){if(e)return localStorage.getItem(e)}instance(e){const{baseURL:t,timeout:s,headers:n={},tokenName:r}=e,a=o.create({baseURL:t,timeout:s||this.timeout,headers:{...n,...this.headers}});return a.interceptors.request.use(e=>{const t=this.getAuthToken(r);return t&&(e.headers["Authorization"]=""+t),e},e=>(console.error("Request error:",e),Promise.reject(e))),a}}e.exports=new n},f705:function(e,t,s){}}]);
//# sourceMappingURL=chunk-e0705454.901e2d5e.js.map