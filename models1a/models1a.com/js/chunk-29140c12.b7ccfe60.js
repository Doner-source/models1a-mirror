(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29140c12"],{"0c74":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return u}));var n=s("bc3a"),i=s.n(n);s("b7ef");function a(e){try{const[,t]=e.split("."),s=JSON.parse(atob(t));return 1e3*s.exp<Date.now()}catch(t){return console.warn("[Token Check]: Invalid JWT Format",t),!0}}class r{constructor(){this.tokenCache=new Map}async get(e){let t=this.tokenCache.get(e);const s=!t||!t.apiKey||!t.apiSignature||a(t.apiKey);return s&&(t=await this._refresh(e),this.tokenCache.set(e,t)),t}async _refresh(e){try{const{data:t}=await i.a.post(e+"publicToken/token");return{apiKey:t.token||null,apiSignature:t.signature||null}}catch(t){console.error("[API KEY ERROR]",t);const s=this.tokenCache.get(e)||{apiKey:null,apiSignature:null};return s}}clear(e){e?this.tokenCache.delete(e):this.tokenCache.clear()}status(){const e={};for(const[t,s]of this.tokenCache.entries())e[t]={hasToken:!!s.apiKey,isExpired:!s.apiKey||a(s.apiKey)};return e}}const o=new r,c=(e="https://userregistration.models1a.com/api/v1/")=>{const t=i.a.create({baseURL:e});return t.interceptors.request.use(async t=>{const s=localStorage.getItem("SID"),n=localStorage.getItem("language");s&&(t.headers["sid"]=s),n&&(t.headers["user-language"]=n);const{apiKey:i,apiSignature:a}=await o.get(e);return i&&(t.headers["x-api-key"]=i),a&&(t.headers["x-api-signature"]=a),t}),t},u=e=>o.clear(e)},"26fb":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"verify"},[t("p",{staticClass:"verify__title"},[e._v("Verificación")]),t("p",{staticClass:"verify__text"},[e._v(" Hemos enviado un código de 4 dígitos a tu correo. "),e.$screen.width>=1024?t("br"):e._e(),e._v(" Ingrésalo para continuar. ")]),t("VerifyCodeInputs",{ref:"codeInputs",attrs:{variant:e.variant,length:4},on:{complete:e.handleComplete}}),e.variant?t("p",{staticClass:"verify__error"},[e._v("Verifica tu código e inténtalo nuevamente")]):e._e(),t("p",{staticClass:"verify__text"},[e._v("Una vez verificado, tu información será procesada de forma segura.")]),t("div",{staticClass:"verify__info"},[t("p",{staticClass:"verify__question"},[e._v("¿No recibiste el código?")]),t("p",{staticClass:"verify__resend",class:{disabled:e.resendDisabled},on:{click:e.resend}},[e._v(" Enviar de nuevo "),e.resendDisabled?t("span",[e._v(" en "+e._s(e.resendText)+" s")]):e._e()])])],1)},i=[],a=(s("14d9"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"verify__inputs"},e._l(e.length,(function(s,n){return t("DigitInput",{key:n,ref:"inputs",refInFor:!0,attrs:{idx:n,value:e.code[n],variant:e.variant},on:{update:e.update,backspace:e.backspace}})})),1)}),r=[],o=function(){var e=this,t=e._self._c;return t("input",{ref:"input",class:["verify__input","verify__input--"+e.variant],attrs:{type:e.type,pattern:e.pattern,maxlength:e.maxlength,inputmode:e.inputmode},domProps:{value:e.value},on:{input:e.onInput,keydown:e.onKeydown}})},c=[],u={name:"input",props:{value:{type:String,default:""},idx:{type:Number,required:!1,default:0},variant:{type:String,default:"default"},type:{type:String,default:"text"},inputmode:{type:String,default:"numeric"},pattern:{type:String,default:"[0-9]*"},maxlength:{type:String,default:"1"}},methods:{onInput(e){this.$emit("update",{idx:this.idx,event:e})},onKeydown(e){"Backspace"===e.key&&this.$emit("backspace",this.idx)},focus(){this.$refs.input.focus()}}},d=u,l=(s("6a8e"),s("2877")),p=Object(l["a"])(d,o,c,!1,null,null,null),h=p.exports,f={name:"VerifyCodeInputs",components:{DigitInput:h},props:{variant:{type:String,default:"default"},length:{type:Number,default:4}},data(){return{code:Array(this.length).fill("")}},methods:{update({idx:e,event:t}){const s=t.target.value.replace(/[^0-9]/g,"");this.$set(this.code,e,s),s&&e<this.length-1&&this.$refs.inputs[e+1].focus(),this.code.every(Boolean)&&this.$emit("complete",this.code.join(""))},backspace(e){this.code[e]?this.$set(this.code,e,""):e>0&&(this.$refs.inputs[e-1].focus(),this.$set(this.code,e-1,""))},reset(){this.code=Array(this.length).fill(""),this.$nextTick(()=>this.$refs.inputs[0].focus())}}},v=f,y=(s("ef96"),Object(l["a"])(v,a,r,!1,null,null,null)),m=y.exports,g=s("0c74");async function _(e={}){const t=Object(g["b"])("https://models1a.com/api/v1/");return await t.post("/2fa/send",e)}async function b(e={}){const t=Object(g["b"])("https://models1a.com/api/v1/");return await t.post("/2fa/verify",e)}var I={name:"VerificationForm",components:{VerifyCodeInputs:m},data(){return{seconds:60,timerId:null,publicApiInstance:"",variant:""}},computed:{resendText(){return this.seconds},resendDisabled(){return this.seconds>0},saved:function(){return this.$store.state.signup.saved||{}},body(){return{modelId:this.saved._id,email:this.saved.email}}},methods:{startTimer(){this.timerId=setInterval(()=>{this.seconds>0?this.seconds--:clearInterval(this.timerId)},1e3)},async handleComplete(e){try{if(!e)return;await b({modelId:this.saved._id,code:e}),this.$router.push({name:"SignupSuccess"})}catch(t){this.variant="error",console.log("error :>> ",t)}},async resend(){this.resendDisabled||(this.seconds=60,this.$refs.codeInputs.reset(),this.startTimer(),this.post())},async post(){var e,t;if(null!==(e=this.body)&&void 0!==e&&e.modelId&&null!==(t=this.body)&&void 0!==t&&t.modelId)try{await _(this.body)}catch(s){console.log("error :>> ",s)}else this.$router.push({path:"signup"})}},async mounted(){this.startTimer(),this.publicApiInstance=Object(g["b"])(),this.post()},beforeDestroy(){clearInterval(this.timerId)}},k=I,x=(s("5dc8"),Object(l["a"])(k,n,i,!1,null,null,null));t["default"]=x.exports},"4aec":function(e,t,s){},"5dc8":function(e,t,s){"use strict";s("4aec")},"6a8e":function(e,t,s){"use strict";s("8d7d")},"8d7d":function(e,t,s){},e615:function(e,t,s){},ef96:function(e,t,s){"use strict";s("e615")}}]);
//# sourceMappingURL=chunk-29140c12.b7ccfe60.js.map