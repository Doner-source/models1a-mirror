(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34d84ef6"],{"4e0e":function(t,e,o){"use strict";o.r(e),o.d(e,"alerts",(function(){return r}));var n=o("3d20"),i=o.n(n);const r={dataSendConfirm:function({title:t,message:e,buttonTextYes:o,buttonTextNo:n}={}){return i.a.fire({title:t||"¿Está seguro?",text:e||"Sus datos serán enviados",icon:"question",showCancelButton:!0,confirmButtonColor:"#bd0909",cancelButtonColor:"##515151",confirmButtonText:o||"Si, enviar",cancelButtonText:n||"No, cancelar"})},dataSending:function({title:t,message:e}={}){i.a.fire({title:t||"Enviando",text:e||"Los datos se están enviando y procesando",timerProgressBar:!0,allowOutsideClick:!1,didOpen:()=>{i.a.showLoading()}})},dataSendError:function({title:t,message:e,buttonText:o}={}){i.a.close(),i.a.fire({title:t||"Error",html:e||"Error enviando los datos",icon:"error",timerProgressBar:!0,confirmButtonColor:"#bd0909"})},dataSendSuccess:function({title:t,message:e,buttonText:o}={}){i.a.close(),i.a.fire({title:t||"Completado",text:e||"Haz enviado tus datos exitosamente, pronto te contactaremos",icon:"success",confirmButtonText:o||"Aceptar",timerProgressBar:!0,confirmButtonColor:"#bd0909"})},dataInfo:function({title:t,message:e,buttonText:o}={}){i.a.close(),i.a.fire({title:t||"",text:e||"",icon:"info",confirmButtonText:o||"Aceptar",timerProgressBar:!0,confirmButtonColor:"#bd0909"})}};e["default"]=r},a5de:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"auth"},[e("div",{attrs:{hidden:""}},[t._v("AUTH "+t._s(t.setter))]),e("Loading")],1)},i=[],r=o("4e0e"),s=o("3df7"),a=o("d8d7"),c=o("bc3a"),u=o.n(c),l={components:{Loading:()=>o.e("chunk-289d473b").then(o.bind(null,"3856"))},data:function(){return{setter:null,app:null}},computed:{sstk:function(){return this.$route.query.sstk},redirect:function(){return this.$route.query.redirect}},methods:{getAppLink(){const t=Object(a["getApp"])("website");return t.link},async initAuth(){try{const{data:t}=await s["a"].get("/auth?sstk="+this.sstk);this.authResponse(t)}catch(t){console.log("error",t),r["default"].dataInfo({title:"Error!",text:t.message,icon:"error",confirmButtonText:"Ok"})}},async authResponse(t){t.token&&localStorage.setItem("authorization",t.token),this.app.ipLimit&&await this.verifyRequireIp();const e=this.redirect?this.redirect:this.getAppLink();location.href=e},async verifyRequireIp(){const t=t=>localStorage.setItem("ipAllowed",t),e=localStorage.getItem("authorization"),o={["authorization"]:e},n=this.app.api+"/location",{data:i}=await u.a.get(n,{headers:o});null!==i&&void 0!==i&&i.isAllowed&&t(!0)}},async mounted(){this.app=Object(a["getApp"])("website"),this.initAuth()}},d=l,p=o("2877"),f=Object(p["a"])(d,n,i,!1,null,null,null);e["default"]=f.exports},d8d7:function(t,e,o){const n=o("0340"),{getSession:i}=o("8669"),r=o("e9db"),{alerts:s}=o("4e0e");t.exports={getMain:function(){const e=t.exports;return e.getApp("autologin")},getHost:function(e){const o=t.exports;e||(e=o.getMain().link);const n=new URL(e);return n.origin},getApp:function(t){const e=n.apps_icons.find(e=>e.key===t);return e},getAppLink:function(t){const e=n.apps_icons.find(e=>e.key===t);return e?e.link:null},getApps:function(){return n.apps_icons},getAuthLnk:function(e){var o;const n=t.exports,r=n.getApp(e),s=null===(o=i())||void 0===o?void 0:o.SSID,a=n.getHost(r.link);return`${a}/auth/?sstk=${s}&app=${r.key}`},openOutApp:(t,e,o,n)=>{if(n)return void parent.postMessage({message:"openApp",data:{app:t,auth:e,sstk:o}},"*");const i=window.open(e,"_blank");i.location.href=e,i.focus()},goToApp:async(e,o,n,i,r,a)=>{const c=t.exports,u=await c.verifyAppRequireIp(e,o,n);if(!u)return void s.dataInfo({title:"Lo sentimos no se encuentra en ninguna de nuestras sedes",message:"Una vez te encuentres ubicado en alguna de nuestras sedes podrás acceder sin problema",icon:"info",iconColor:"#bd0909",confirmButtonColor:"#bd0909"});if(e.key===i)return void(window.location=a||"/main");const l=c.getHost(e.link),d=o.SSID;let p=`${l}/auth/?sstk=${d}&app=${e.key}`;a&&(p+="&redirect="+a),e.out?c.openOutApp(e,p,d,r):(localStorage.removeItem(n),location.href=p)},verifyAppRequireIp:async(e,o,n)=>{try{localStorage.removeItem("ipAllowed");const i=()=>localStorage.setItem("ipAllowed",!0);if(null===e||void 0===e||!e.ipLimit)return!0;if("superadmin"===o.role)return i(),!0;const s=t.exports,a=s.getMain(),c={baseURL:a.api,tokenName:n},{data:u}=await r.instance(c).get("/location"),l=(null===u||void 0===u?void 0:u.isAllowed)||!1;return l&&i(),l}catch(i){console.log("verifyAppRequireIp: "+i.message)}}}},e9db:function(t,e,o){const n=o("bc3a");class i{constructor(){this.timeout=1e4,this.headers={"Content-Type":"application/json"}}getAuthToken(t){if(t)return localStorage.getItem(t)}instance(t){const{baseURL:e,timeout:o,headers:i={},tokenName:r}=t,s=n.create({baseURL:e,timeout:o||this.timeout,headers:{...i,...this.headers}});return s.interceptors.request.use(t=>{const e=this.getAuthToken(r);return e&&(t.headers["Authorization"]=""+e),t},t=>(console.error("Request error:",t),Promise.reject(t))),s}}t.exports=new i}}]);
//# sourceMappingURL=chunk-34d84ef6.6fa6aac6.js.map