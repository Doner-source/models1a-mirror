(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d1d9cf4"],{"2a7b":function(t,e,s){},"555a":function(t,e,s){},c3c9:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("section",{staticClass:"news"},[e("h1",{staticClass:"news__title"},[t._v("Registros Nuevos")]),e("div",{staticClass:"news__contentMenus"},[t._l(t.menus,(function(s,a){return e("router-link",{key:a,staticClass:"news__menu",attrs:{to:s.to}},[e("span",[t._v(t._s(s.name))]),e("span",{class:"news__numData news__numData--"+(t.$route.params.status===s.to.params.status?"active  ":"")},[t._v(t._s(s.numRecords))])])})),e("span",{staticClass:"news__line"})],2),e("div",{staticClass:"news__container"},[e("FilterBar",{staticClass:"news__filterBar"}),e("router-view")],1)])},i=[],r=function(){var t=this,e=t._self._c;return e("section",{staticClass:"filterBar"},[e("div",{staticClass:"filterBar__section"},[e("div",{staticClass:"filterBar__sectionPart"},[t.hasFilters?e("span",{staticClass:"filterBar__numData"},[t._v(t._s(t.$store.state.records.documentsInFilter))]):t._e(),e("div",{staticClass:"filterBar__search"},[e("iconic",{staticClass:"filterBar__iconSearch",attrs:{name:"search_new"}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"filterBar__searchInput",attrs:{type:"text",placeholder:"Buscar"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})],1),e("v-md-date-range-picker",{key:t.resetCalendar,ref:"myDatePicker",staticClass:"filterBar__rangePicker",attrs:{opens:"left",startDate:t.dateInCalendar,endDate:t.dateTo},on:{change:t.handleChange}}),e("div",{staticClass:"filterBar__item",on:{click:function(e){return t.$refs.myDatePicker.togglePicker()}}},[e("iconic",{attrs:{name:"calendar"}}),e("span",{staticClass:"filterBar__datesInFilter"},[t._v(t._s(t.datesInFilter))])],1)],1),e("div",{staticClass:"filterBar__sectionPart"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.city,expression:"city"}],staticClass:"filterBar__item filterBar__item--select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.city=e.target.multiple?s:s[0]}}},[e("option",{attrs:{value:""}},[t._v("Ciudad")]),t._l(t.cities,(function(s){return e("option",{key:s._id,staticClass:"filterBar__selectOption",domProps:{value:s._id}},[t._v(t._s(s.cityName))])}))],2),t._l(t.features,(function(s){return e("div",{key:s._id,class:["filterBar__item filterBar__item--"+s._id,t.feature===s._id&&"selected"],on:{click:function(e){return t.setFeature(s._id)}}},[t.screenWidth>1497||t.screenWidth<732&&t.screenWidth>590?e("span",[t._v(t._s(s.name))]):e("span",[t._v(t._s(s.name.charAt()))])])})),t.hasFilters?e("div",{staticClass:"filterBar__deleteFilters",on:{click:t.deleteOtherFilters}},[e("iconic",{staticClass:"filterBar__deleteIcon",attrs:{name:"times"}}),t.screenWidth>1236?e("span",[t._v("Eliminar filtros")]):t._e()],1):t._e()],2)]),t.screenWidth>1318?e("div",{staticClass:"filterBar__section"},[e("i",{staticClass:"fa fa-print filterBar__iconDocument"}),e("iconic",{staticClass:"filterBar__iconDocument",attrs:{name:"excel"}})],1):t._e()])},n=[],c=(s("14d9"),{data(){return{searchTimeOut:null,search:"",date:"",dateTo:"",city:"",feature:"",resetCalendar:1,keysData:["search","date","dateTo","city","feature"],features:[{_id:"priority",name:"Prioridad"},{_id:"satelite",name:"SatÃ©lite"},{_id:"male",name:"Masculino"}]}},computed:{async query(){const t=this.keysData.map(async t=>this[t]?"search"===t?(clearTimeout(this.searchTimeOut),await new Promise(e=>{this.searchTimeOut=setTimeout(()=>{this[t]?e({[t]:this[t]}):e("")},400)})):{[t]:this[t]}:""),e=await Promise.all(t);return Object.assign({},...e)},queryString(){const{query:t,params:e}=this.$route;let s=`status=${(null===e||void 0===e?void 0:e.status)||""}&`;return Object.entries(t).forEach(([t,e])=>s+=`${t}=${e}&`),s},hasFilters(){return this.keysData.some(t=>this[t])},datesInFilter(){let t=""+this.date.split("-").join("/");return this.dateTo&&(t+="-"+this.dateTo.split("-").join("/")),this.screenWidth<1112&&t&&(t=t.split("-").map(t=>{const[e,s,a]=t.split("/");return`${s}/${a}`}).join("-")),t},screenWidth(){return this.$screen.width},dateInCalendar(){return this.date||(new Date).toISOString().split("T")[0]},cities(){return this.$store.state.cities}},watch:{async query(){await this.executeFilter()},async $route(){this.$store.dispatch("records/searchDocumentsInFilter",this.queryString),await this.$store.dispatch("records/executeGetRecords",this.queryString)}},methods:{handleChange(t){this.date=t[0]._isValid?t[0]._d.toISOString().split("T")[0]:"",this.dateTo=t[1]._isValid?t[1]._d.toISOString().split("T")[0]:""},setFeature(t){this.feature=this.feature===t?"":t},async executeFilter(){await this.$router.push({query:await this.query}).catch(()=>{})},deleteOtherFilters(){this.keysData.forEach(t=>this[t]="")}},async mounted(){const t=this.$route.query;this.keysData.forEach(e=>t[e]&&(this[e]=t[e])),await this.executeFilter(),await this.$store.dispatch("records/executeGetRecords",this.queryString),this.$store.dispatch("records/searchDocumentsInFilter",this.queryString)}}),o=c,l=(s("edc7"),s("2877")),u=Object(l["a"])(o,r,n,!1,null,null,null),d=u.exports,h={components:{FilterBar:d},data(){return{news:0,disapproved:0}},computed:{menus(){return[{name:"Nuevos",numRecords:this.news,to:{name:"News",params:{status:"new"},query:this.$route.query}},{name:"No aprobados",numRecords:this.disapproved,to:{name:"Disapproved",params:{status:"disapproved"},query:this.$route.query}}]}},async beforeMount(){[this.news,this.disapproved]=await Promise.all([await this.$store.dispatch("records/getDocumentsInFilter","status=new"),await this.$store.dispatch("records/getDocumentsInFilter","status=disapproved")])}},_=h,m=(s("d67b"),Object(l["a"])(_,a,i,!1,null,null,null));e["default"]=m.exports},d67b:function(t,e,s){"use strict";s("2a7b")},edc7:function(t,e,s){"use strict";s("555a")}}]);
//# sourceMappingURL=chunk-5d1d9cf4.981d8e2d.js.map